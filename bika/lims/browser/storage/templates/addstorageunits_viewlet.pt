<html>
<head>
    <script tal:attributes="src python:context.absolute_url() + '/bika_widgets/referencewidget.js'"
            type="text/javascript"></script>
</head>
<body>
<style type="text/css">
    .add-storageunits .discreet{
      font-size:50%;
      color:#ddd;
    }
    .add-storageunits input{
      margin-bottom:5px;
    }

    /*The collapse-header is positioned upwards, compensate here with margin.
    extra compensation since we only use the one collapsible, and we want to
    position it away from the green-bar.
    */
    .collapsible {
      margin-top: 2em !important;
    }

    .discreet li {padding:0;margin:0;line-height:1em !important;}

    td {padding:10px 10px 0 0;}



</style>

<dl class="collapsible collapsedOnLoad">
    <dt class="collapsibleHeader">
        &nbsp;<img src="++resource++bika.lims.images/add.png">&nbsp;
        <span i18n:translate="">Add new Storage Units</span>
    </dt>
    <dd class="collapsibleContent">
        <div class="discreet" class="helptext">
            Storage Units are the top-level containers in the storage layout.
            They can be
            buildouts, rooms, freezers, or whatever you like.<br/>The values set
            on a Storage
            Unit can be overridden by any Storage Level or Storage Location
            inside it.
        </div>
        <div class="add-storageunits" style="padding: 10px 0px;">
            <form name="add-storageunits" action="addstorageunits_submit" method="POST">
                <table>
                    <tr>
                        <td>Template for new Titles:
                            <div class="discreet">The display titles with {id}
                                included.
                            </div>
                        </td>
                        <td><input name="titletemplate"
                                   class="titletemplate"
                                   placeholder="Title For {id}"
                                   tal:attributes="value python: request.get('titletemplate', '')"/>
                        </td>
                    <tr>
                    <tr>
                        <td>Template for new IDs:
                            <div class="discreet">IDs should not include spaces
                                or non-ascii characters.
                            </div>
                        </td>
                        <td>
                            <input name="idtemplate"
                                   class="idtemplate"
                                   placeholder="prefix-{id}"
                                   tal:attributes="value python: request.get('idtemplate', '')"/>
                        </td>
                    </tr>
                    <tr>
                        <td>ID Sequence Start:</td>
                        <td>
                            <input name="seq_start"
                                   type="number"
                                   class="seq_start"
                                   tal:attributes="value python: request.get('seq_start', '1')"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Number of Storage Units to create
                        </td>
                        <td>
                            <input name="storageunit_count"
                                   type="number"
                                   class="storageunit_count"
                                   tal:attributes="value python: request.get('storageunit_count', '1')"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Temperature
                        </td>
                        <td>
                            <input name="temperature"
                                   class="temperature"
                                   tal:attributes="value python: request.get('temperature', '')"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Department
                        </td>
                        <td>
                            <div style="width:100%" class="field ArchetypesReferenceWidget">
                                <input
                                        type="text"
                                        name="Batch"
                                        id="Department"
                                        class="blurrable firstToFocus referencewidget"
                                        value=""
                                        base_query='{"portal_type": "Department", "inactive_state": "active"}'
                                        search_query='{}'
                                        catalog_name="bika_setup_catalog"
                                        ui_item="Title"
                                        autocomplete="false"
                                        combogrid_options='{"colModel": [{"columnName": "Title", "align": "left", "label": "Department Title", "width": "100"},
                                            {"columnName": "UID", "hidden": true}],
                                "search_fields": ["Title"],
                                "catalog_name": "bika_setup_catalog",
                                "url": "referencewidget_search",
                                "discard_empty": [],
                                "popup_width": "550px",
                                "showOn": true,
                                "searchIcon": true,
                                "minLength": "0",
                                "resetButton": false,
                                "sord": "asc",
                                "sidx": "Title",
                                "force_all": true,
                                "portal_types": {}}'/>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Address
                        </td>
                        <td>
                            <textarea name="address" id="address" tal:attributes="value python: request.get('address', '')"></textarea>
                        </td>
                    </tr>
                </table>
                <input name="viewlet_submitted"
                       type="submit"
                       class="storageunits-add"
                       value="Add Storage Units">
            </form>
        </div>
    </dd>
</dl>

</body>
</html>











